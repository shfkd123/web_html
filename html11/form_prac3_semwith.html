<!DOCTYPE html>
<html lang="kr">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">
/* 	div {border: 1px solid;} */
div.left {
	height: 200px;
	float: left;
	width: calc(50% - 25px);
	text-align: right;
	/* 	    margin-bottom: 50px; */
}

div.center {
	height: 200px;
	width: 50px;
	float: left;
	text-align: center;
	display: flex;
	align-items: center;
}

div.right {
	height: 200px;
	float: right;
	width: calc(50% - 25px);
	text-align: left;
}

div.bottom {
	text-align: center;
}

select {
	height: 200px;
	width: 150px;
}

button {
	width: 30px;
}

div.bottom button {
	width: 100px;
}

/* 사용자가 편하게 컨트롤하는게 좋은 UI, 마우스를 많이 사용안하고 */
</style>
<script type="text/javascript">
	function moveRight(param) {
		console.log(param);

		var leftSel = document.getElementById("left");
		var rightSel = document.getElementById("right");

		// 		leftSel.length ==> select의 option 개수
		// 		leftSel[i] ==> select의 i번째 option
		for (var i = 0; i < leftSel.length; i++) {
			// 선택된 것 옮길때
			if (param == undefined) {
				// leftSel[i].selected ==> 선택이 된 상태면 true, 아니면 false
				// i번째 옵션이 선택되었는지 여부
				if (leftSel[i].selected) { //객체 옮기기
					rightSel.append(leftSel[i]); //인덱스가 줄어들면 1번에 있던 값이 0번으로 내려가기 때문에
					//-1을 해준다. 
					i--;
				}
				//여기까지만 확인하고 싶을 땐! - return 사용
				//return; 

			} else {
				// 전체 옮기기
				rightSel.append(leftSel[i]);
				i--;
			}
		}
	}
	
	function moveLeft(param) {
		var leftSel = document.getElementById("left");
		var rightSel = document.getElementById("right");

		for (var i = 0; i < rightSel.length; i++) {
			// 선택된 것 옮길때
			if (param == undefined) {
				// leftSel[i].selected ==> 선택이 된 상태면 true, 아니면 false
				// i번째 옵션이 선택되었는지 여부
				if (rightSel[i].selected) { //객체 옮기기
					leftSel.append(rightSel[i]); //인덱스가 줄어들면 1번에 있던 값이 0번으로 내려가기 때문에
					//-1을 해준다. 
					i--;
				}
				//여기까지만 확인하고 싶을 땐! - return 사용
				//return; 

			} else {
				// 전체 옮기기
				leftSel.append(rightSel[i]);
				i--;
			}
		}
	}

	function addText() {
		// 추가할 값
		var str = document.getElementById("addText").value;
		
		// step1.중복된 값이 있는지 확인하기
		var sel = document.getElementById("left");
		for(var i=0 ; i< sel.length ; i++) {
			console.log(sel[i].innerHTML);
			//sel[i].innerHTML;// <option value="01">홍길동</option>
			if(sel[i].innerHTML == str) {
				//alert('"' + str + '"은(는) 이미 등록된 값입니다.');
				// '홍도'은(는) 이미 등록된 값입니다.
				alert("\"" + str + "\"은(는) 이미 등록된 값입니다.");
				// "홍길은"은(는) 이미 등록된 값입니다.
				
				document.getElementById("addText").focus();
				return;
			}
		}
		
		
		// step2.중복된 값이 없으면 추가하기
		//<option>1</option>
		var ele = document.createElement("option");
		ele.innerHTML = str;
		
		// 왼쪽 셀렉트박스에 옵션 추가하기
		document.getElementById("left").appendChild(ele);
		
		// 입력란을 빈값으로 초기화 시키기
		document.getElementById("addText").value = "";
		// 입력란으로 포커스 주기
		document.getElementById("addText").focus();
		
		
	}
</script>
</head>
<body>
	<div class="top">
		<h2>select 객체 예제</h2>
	</div>
	<div class="left">
		<select id="left" multiple="multiple">
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		</select>
	</div>
	<div class="center">
		<div> <!-- 버튼만 감싸는 div -->
			<button type="button" onclick="moveRight()">&gt;</button>
			<br>
			<button type="button" onclick="moveRight('all')">&gt;&gt;</button>
			<br>
			<button type="button" onclick="moveLeft()">&lt;</button>
			<br>
			<button type="button" onclick="moveLeft('all')">&lt;&lt;</button>
		</div>
	</div>
	<div class="right">
		<select id="right" multiple="multiple">
		</select>
	</div>
	<div class="bottom">
		<input type="text" id="addText">
		<button type="button" onclick="addText()">추가</button>
	</div>
</body>
</html>